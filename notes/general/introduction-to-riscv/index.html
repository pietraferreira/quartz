<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Introduction to RISC-V  Notes on the Introduction to RISC-V LinuxFoundation course.
   - Getting to know RISC-V   - The RISC-V Story   - The RISC-V Community   - Developing RISC-V   - RISC-V in Practice   Chapter 1 - Getting to know RISC-V Overview  Difference between RISC-V ISA and RISC-V international."><title>Introduction to RISC-V</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=ico href=https://pietraferreira.github.io/quartz//favicon.ico><link href=https://pietraferreira.github.io/quartz/styles.5c5e8e492b01ec554ac9a86fe1e7f16f.min.css rel=stylesheet><link href=https://pietraferreira.github.io/quartz/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://pietraferreira.github.io/quartz/js/darkmode.a93be4d36d657139e957880e320dd457.min.js></script>
<script src=https://pietraferreira.github.io/quartz/js/util.fa8e74b4065b97e6980a72cc472e436f.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://pietraferreira.github.io/quartz/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script>
<script src=https://pietraferreira.github.io/quartz/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://pietraferreira.github.io/quartz/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://pietraferreira.github.io/quartz/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,PRODUCTION=!0,BASE_URL="https://pietraferreira.github.io/quartz/",fetchData=Promise.all([fetch("https://pietraferreira.github.io/quartz/indices/linkIndex.287f1aecbc369b510124dd311b3dd85d.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://pietraferreira.github.io/quartz/indices/contentIndex.d9a0d403c595d40a1eff18d43b279ed6.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://pietraferreira.github.io/quartz",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://pietraferreira.github.io/quartz",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/pietraferreira.github.io\/quartz\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://pietraferreira.github.io/quartz/js/full-text-search.51f0b1753e9b30839d053f8a98cc20d1.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://pietraferreira.github.io/quartz/>🪅 Morioh</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Introduction to RISC-V</h1><p class=meta>Last updated
Nov 24, 2022
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/notes/general/introduction-to-riscv.md rel=noopener>Edit Source</a></p><ul class=tags><li><a href=https://pietraferreira.github.io/quartz/tags/work/>Work</a></li><li><a href=https://pietraferreira.github.io/quartz/tags/riscv/>Riscv</a></li></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#chapter-1---getting-to-know-risc-v>Chapter 1 - Getting to know RISC-V</a><ol><li><a href=#overview>Overview</a></li><li><a href=#what-is-risc-v>What is RISC-V?</a></li><li><a href=#the-risc-v-community>The RISC-V Community</a></li><li><a href=#risc-v-internation>RISC-V Internation</a></li></ol></li><li><a href=#chapter-2---the-risc-v-story>Chapter 2 - The RISC-V Story</a><ol><li><a href=#overview-1>Overview</a></li><li><a href=#how-it-all-started>How it all started</a></li><li><a href=#importance-of-open-source-and-open-standards>Importance of Open Source and Open Standards</a></li><li><a href=#history-of-risc-and-open-isas>History of RISC and Open ISAs</a></li><li><a href=#risc-v-origins-uc-berkeley-architecture-research>RISC-V Origins: UC Berkeley Architecture Research</a></li><li><a href=#the-risc-v-name>The RISC-V Name</a></li><li><a href=#what-is-risc-v-international>What is RISC-V International?</a></li><li><a href=#risc-v-membership>RISC-V Membership</a></li><li><a href=#risc-v-international-governance>RISC-V International Governance</a></li><li><a href=#risc-v-community-working-model>RISC-V Community Working Model</a></li><li><a href=#risc-vs-relationship-with-the-linux-foundation>RISC-V&rsquo;s Relationship with the Linux Foundation</a></li></ol></li><li><a href=#chapter-3---the-risc-v-community>Chapter 3 - The RISC-V Community</a><ol><li><a href=#overview-2>Overview</a></li><li><a href=#culture-of-community-engagement>Culture of Community Engagement</a></li><li><a href=#intellectual-property-policy>Intellectual Property Policy</a></li><li><a href=#code-of-conduct-and-privacy>Code of Conduct and Privacy</a></li><li><a href=#risc-vs-technical-organisation>RISC-V&rsquo;s Technical Organisation</a></li><li><a href=#terminology>Terminology</a></li><li><a href=#technical-leadership-and-governance>Technical Leadership and Governance</a></li><li><a href=#technical-steering-committee>Technical Steering Committee</a></li><li><a href=#isa-and-horizontal-committees-and-subcommittees>ISA and Horizontal Committees and Subcommittees</a></li><li><a href=#task-groups>Task Groups</a></li><li><a href=#technical-staff>Technical Staff</a></li><li><a href=#additional-roles>Additional Roles</a></li><li><a href=#risc-v-wiki>RISC-V Wiki</a></li><li><a href=#public-discussion-groups>Public Discussion Groups</a></li><li><a href=#the-risc-v-exchange>The RISC-V Exchange</a></li></ol></li><li><a href=#chapter-4---developing-risc-v>Chapter 4 - Developing RISC-V</a><ol><li><a href=#overview-3>Overview</a></li><li><a href=#how-the-risc-v-isa-is-different>How the RISC-V ISA is Different</a></li><li><a href=#collaborative-development-model>Collaborative Development Model</a></li><li><a href=#creating-and-curating-open-specifications>Creating and Curating Open Specifications</a></li><li><a href=#risc-v-extensions-lifecycle>RISC-V Extensions Lifecycle</a></li><li><a href=#organising-the-specifications>Organising the Specifications</a></li><li><a href=#inside-the-unprivileged-specification>Inside the Unprivileged Specification</a></li><li><a href=#base-isa-extensions>Base ISA Extensions</a></li><li><a href=#the-privileged-specification>The Privileged Specification</a></li><li><a href=#machine-level-m-mode-isa>Machine-Level (M-Mode) ISA</a></li><li><a href=#non-maskable-interrupts-nmis>Non-Maskable Interrupts (NMIs)</a></li><li><a href=#physical-memory-attributes-pma>Physical Memory Attributes (PMA)</a></li><li><a href=#physical-memory-protection-pmp>Physical Memory Protection (PMP)</a></li><li><a href=#supervisor-level-s-mode-isa>Supervisor-Level (S-Mode) ISA</a></li><li><a href=#non-isa-specifications>Non-ISA Specifications</a></li></ol></li><li><a href=#chapter-5---risc-v-in-practice>Chapter 5 - RISC-V In Practice</a><ol><li><a href=#overview-4>Overview</a></li><li><a href=#required-documentation>Required Documentation</a></li><li><a href=#assembly-language-overview>Assembly Language Overview</a></li><li><a href=#compiling-required-binaries>Compiling Required Binaries</a></li><li><a href=#creating-a-custom-risc-v-system>Creating a Custom RISC-V System</a></li><li><a href=#environment-overview>Environment Overview</a></li></ol></li><li><a href=#more-information>More information</a></li></ol></nav></details></aside><a href=#introduction-to-risc-v><h1 id=introduction-to-risc-v><span class=hanchor arialabel=Anchor># </span>Introduction to RISC-V</h1></a><hr><p>Notes on the
<a href=https://learning.edx.org/course/course-v1:LinuxFoundationX+LFD110x+1T2021/home rel=noopener>Introduction to RISC-V</a> LinuxFoundation course.</p><ul><li><a href=/quartz/notes/general/introduction-to-riscv/ rel=noopener class=internal-link data-src=/quartz/notes/general/introduction-to-riscv/></a> - Getting to know RISC-V</li><li><a href=/quartz/notes/general/introduction-to-riscv/ rel=noopener class=internal-link data-src=/quartz/notes/general/introduction-to-riscv/></a> - The RISC-V Story</li><li><a href=/quartz/notes/general/introduction-to-riscv/ rel=noopener class=internal-link data-src=/quartz/notes/general/introduction-to-riscv/></a> - The RISC-V Community</li><li><a href=/quartz/notes/general/introduction-to-riscv/ rel=noopener class=internal-link data-src=/quartz/notes/general/introduction-to-riscv/></a> - Developing RISC-V</li><li><a href=/quartz/notes/general/introduction-to-riscv/ rel=noopener class=internal-link data-src=/quartz/notes/general/introduction-to-riscv/></a> - RISC-V in Practice</li></ul><hr><a href=#chapter-1---getting-to-know-risc-v><h2 id=chapter-1---getting-to-know-risc-v><span class=hanchor arialabel=Anchor># </span>Chapter 1 - Getting to know RISC-V</h2></a><a href=#overview><h3 id=overview><span class=hanchor arialabel=Anchor># </span>Overview</h3></a><ul><li>Difference between RISC-V
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a> and RISC-V international.</li><li>Description of the organisation around the RISC-V community.</li><li>Goals of RISC-V international as a community-driven organisation.</li></ul><a href=#what-is-risc-v><h3 id=what-is-risc-v><span class=hanchor arialabel=Anchor># </span>What is RISC-V?</h3></a><p><a href=https://en.wikipedia.org/wiki/Reduced_instruction_set_computer rel=noopener>RISC</a> is short for <strong>Reduced Instruction Set Computer</strong> as was designed in the 1980s.</p><p>RISC-V can refer to different things:</p><ul><li>The Instruction Set Architecture (
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a>)</li></ul><ul><li>The community of users and developers who develop and use the
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a>.</li><li>The RISC-V International Association that manages the
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a>.</li><li>The hardware and IP products built on the
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a>.</li></ul><a href=#the-risc-v-community><h3 id=the-risc-v-community><span class=hanchor arialabel=Anchor># </span>The RISC-V Community</h3></a><p>Everyone shares a common interest in developing an <strong>openly</strong> available instruction set architecture specification and the ecosystem around it, including:</p><ul><li>Physical hardware - processors, development boards, System-on-Chips (SoCs), System-on-Modules (SoMs), and other physical systems</li><li>“Soft” IP processor cores that can be loaded into emulators or onto field-programmable gate array (FPGAs), or written in silicon</li><li>The entire software stack, from boot-loaders and firmware up to full operating systems and applications</li><li>Educational materials, including courseware, curricula, lesson plans, online courses like this one, tutorials, podcasts, lab assignments, even books</li><li>Services, including verification, custom board design, and many more</li></ul><p>All of this community output is recognised on the RISC-V Exchange, an organised section on the RISC-V website that describes the ecosystem in terms of available hardware and software, services, learning materials, and discussion points.</p><a href=#risc-v-internation><h3 id=risc-v-internation><span class=hanchor arialabel=Anchor># </span>RISC-V Internation</h3></a><p>The RISC-V community spans over more than 40 countries and RISC-V international is a Swiss non-profit organisation.</p><p>RISC-V international does not produce hardware, they provide the basics for all of its members organisations to create new technology based on the foundational support of the RISC-V
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a>.</p><a href=#chapter-2---the-risc-v-story><h2 id=chapter-2---the-risc-v-story><span class=hanchor arialabel=Anchor># </span>Chapter 2 - The RISC-V Story</h2></a><a href=#overview-1><h3 id=overview-1><span class=hanchor arialabel=Anchor># </span>Overview</h3></a><ul><li>How the RISC-V Instruction Set Architecture was created.</li><li>The structure of RISC-V international.</li><li>How member organisations work together to develop an open source community.</li></ul><a href=#how-it-all-started><h3 id=how-it-all-started><span class=hanchor arialabel=Anchor># </span>How it all started</h3></a><p>It started at UC Berkeley Parallel Computing Lab while discussing the importance of open source and open standards.</p><a href=#importance-of-open-source-and-open-standards><h3 id=importance-of-open-source-and-open-standards><span class=hanchor arialabel=Anchor># </span>Importance of Open Source and Open Standards</h3></a><p>Because technology does not persist in isolation - as the world becomes more complex and connected, global standards ensure that society realises the benefits of interoperability from the inventor to the consumer.</p><p><a href=https://en.wikipedia.org/wiki/Tim_Berners-Lee rel=noopener>Tim Berners-Lee</a> for example led a revolution to standardise the protocols we use on the internet (HTML, URL, HTTP).</p><p>Advances in software and hardware standardisation through global collaboration and consensus as well as open source development and delivery has accelerated technical progress at an unprecedented global scale.</p><p>As an
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a>, RISC-V is not &ldquo;open source&rdquo; in the same way as software (as an
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a> is not made of source code). It is an <strong>open specification</strong>.</p><a href=#history-of-risc-and-open-isas><h3 id=history-of-risc-and-open-isas><span class=hanchor arialabel=Anchor># </span>History of RISC and Open ISAs</h3></a><p>Reduced Instruction Set Computers (
<a href=https://en.wikipedia.org/wiki/Reduced_instruction_set_computer rel=noopener>RISC</a>) where created at the University of California at Berkeley (UCB) nearly at the same time as MIPS at Stanford (in the 1980s).</p><p>Some popular RISC architectures are: the SPARC line, DEC&rsquo;s Alpha line, Intel&rsquo;s i860 and i960 processors and ARM processors. <strong>RISC-V is the latest iteration of it</strong>.</p><a href=#risc-v-origins-uc-berkeley-architecture-research><h3 id=risc-v-origins-uc-berkeley-architecture-research><span class=hanchor arialabel=Anchor># </span>RISC-V Origins: UC Berkeley Architecture Research</h3></a><p>The RISC-V instruction set was started by Prof. Krste Asanovic and graduate students Yunsup Lee and Andrew Waterman as part of the Parallel Computing Laboratory (
<a href=/quartz/notes/general/parlab/ rel=noopener class=internal-link data-src=/quartz/notes/general/parlab/>Par Lab</a>) at UC Berkeley, of which Prof. David Patterson was Director.</p><p>The following report is the <strong>first publication</strong> that describes the RISC-V instruction set:
<a href=https://www2.eecs.berkeley.edu/Pubs/TechRpts/2011/EECS-2011-62.pdf rel=noopener><em>The RISC-V Instruction Set Manual</em></a>.</p><p><a href=https://www.darpa.mil/work-with-us/for-universities rel=noopener>DARPA</a> (Defense Advanced Research Projects Agency) plays a significant role.</p><a href=#the-risc-v-name><h3 id=the-risc-v-name><span class=hanchor arialabel=Anchor># </span>The RISC-V Name</h3></a><p>The name RISC-V was chosen to represent the fifth major RISC
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a> design from UC Berkeley (RISC-I, RISC-II, SOAR and SPUR).</p><a href=#what-is-risc-v-international><h3 id=what-is-risc-v-international><span class=hanchor arialabel=Anchor># </span>What is RISC-V International?</h3></a><p>The RISC-V Foundation was founded in 2015 and it is controlled by its members.</p><p>Incorporation in Switzerland has the effect of calming concerns of political disruption to the open collaboration model. RISC-V international does not maintain any commercial interest in products or services.</p><p>The RISC-V International Association was incorporated in Switzerland in March 2020.</p><a href=#risc-v-membership><h3 id=risc-v-membership><span class=hanchor arialabel=Anchor># </span>RISC-V Membership</h3></a><p>It is free for individual people, academic institutions and non-profit organisations. There are three membership levels available for for-profit organisations.</p><ol><li>Premier Members</li><li>Strategic Members</li><li>Community Organisations</li><li>Community Individuals</li></ol><a href=#risc-v-international-governance><h3 id=risc-v-international-governance><span class=hanchor arialabel=Anchor># </span>RISC-V International Governance</h3></a><p>RISC-V international is governed by its Board of Directors. The Board is composed of Directors elected to represent all classes of membership to ensure voice at all levels. They also have a Technical Steering Committee (TSC) which provides leadership to technical initiatives.</p><p>There is also a range of committees and task groups.</p><a href=#risc-v-community-working-model><h3 id=risc-v-community-working-model><span class=hanchor arialabel=Anchor># </span>RISC-V Community Working Model</h3></a><p>There are three public forums that anyone can participate:</p><ul><li>The RISC-V public mailing lists:
<a href="https://groups.google.com/u/1/a/groups.riscv.org/g/isa-dev?pli=1" rel=noopener>ISA-Dev</a> and
<a href=https://groups.google.com/u/1/a/groups.riscv.org/g/sw-dev rel=noopener>SW-Dev</a>.</li><li>The
<a href=https://exchange.riscv.org/ rel=noopener>Exchange forums</a>.</li><li>The
<a href=https://risc-v-international.slack.com/ rel=noopener>RISC-V Slack channel</a> for live chat.</li></ul><a href=#risc-vs-relationship-with-the-linux-foundation><h3 id=risc-vs-relationship-with-the-linux-foundation><span class=hanchor arialabel=Anchor># </span>RISC-V&rsquo;s Relationship with the Linux Foundation</h3></a><p>In November 2018 the RISC-V Foundation announced a joint collaboration with the Linux Foundation.</p><a href=#chapter-3---the-risc-v-community><h2 id=chapter-3---the-risc-v-community><span class=hanchor arialabel=Anchor># </span>Chapter 3 - The RISC-V Community</h2></a><a href=#overview-2><h3 id=overview-2><span class=hanchor arialabel=Anchor># </span>Overview</h3></a><ul><li>Understand how the technical organisation works in RISC-V.</li><li>Know where to go for information as well as communication.</li><li>Completely understand the RISC-V Code of Conduct and how it applies to all forms of communication within the organisation.</li></ul><a href=#culture-of-community-engagement><h3 id=culture-of-community-engagement><span class=hanchor arialabel=Anchor># </span>Culture of Community Engagement</h3></a><p>RISC-V operates primarily as a group of motivated organisations and individuals pursuing a common goal by working in concert rather than as adversaries, even if those organisations compete with each other in other areas.</p><p>As of February 2021 there are well over 2,000 people working on RISC-V, representing over 230 organisations.</p><a href=#intellectual-property-policy><h3 id=intellectual-property-policy><span class=hanchor arialabel=Anchor># </span>Intellectual Property Policy</h3></a><p>At the core of the RISC-V membership is the
<a href=https://riscv.org/wp-content/uploads/2020/03/RISC-V_Membership_Agreement_NFS.pdf rel=noopener>membership agreement</a>.</p><a href=#code-of-conduct-and-privacy><h3 id=code-of-conduct-and-privacy><span class=hanchor arialabel=Anchor># </span>Code of Conduct and Privacy</h3></a><p>You can find it
<a href=https://riscv.org/community/community-code-of-conduct/ rel=noopener>here</a>.</p><p>RISC-V also follows the
<a href=https://linuxfoundation.org/privacy/ rel=noopener>Linux Foundation&rsquo;s privacy policy</a>.</p><a href=#risc-vs-technical-organisation><h3 id=risc-vs-technical-organisation><span class=hanchor arialabel=Anchor># </span>RISC-V&rsquo;s Technical Organisation</h3></a><p>Krste Asanovic, Yunsup Lee and Andrew Waterman all participate daily as technical task group and committee chairs as well as mentors to other technical leaders. David Patterson and Krste Asanovic represent member organisations on the Board of Directors.</p><a href=#terminology><h3 id=terminology><span class=hanchor arialabel=Anchor># </span>Terminology</h3></a><a href=#technical-steering-committee-tsc><h4 id=technical-steering-committee-tsc><span class=hanchor arialabel=Anchor># </span>Technical Steering Committee (TSC)</h4></a><p>Primary decision-making body within the technical organisation.</p><a href=#chief-technology-office-cto><h4 id=chief-technology-office-cto><span class=hanchor arialabel=Anchor># </span>Chief Technology Office (CTO)</h4></a><p>Runs TSC voting process, Leadership Strategy Meeting (LSM) and Chairs meetings, strategy, organisation, IT, roadmap, resources, escalations.</p><a href=#isa-committees-ic><h4 id=isa-committees-ic><span class=hanchor arialabel=Anchor># </span>ISA Committees (IC)</h4></a><p>Approve and oversee packages for TSC votes for the creation of ISA Extension TGs, as well as filling the chair and vice-chair vacancies for its TGs. Develop strategy for the groups under it and complete coverage of areas of responsibility under it including gaps.</p><a href=#horizontal-committees-hc><h4 id=horizontal-committees-hc><span class=hanchor arialabel=Anchor># </span>Horizontal Committees (HC)</h4></a><p>Approve and oversee TGs working on activities other than ISA extensions. Has responsibilities to make sure that all ISA TGs cover the area overseen by the HC before ratification. Responsible for developing a holistic strategy and reaching out to the external ecosystem and community groups.</p><a href=#horizontal-subcommittees-hsc><h4 id=horizontal-subcommittees-hsc><span class=hanchor arialabel=Anchor># </span><strong>Horizontal Subcommittees (HSC)</strong></h4></a><p>Subcommittees underneath the Horizontal Committees, with similar responsibilities over a more focused topic.</p><a href=#task-groups-tg><h4 id=task-groups-tg><span class=hanchor arialabel=Anchor># </span><strong>Task Groups (TG)</strong></h4></a><p>Must have a charter that defines deliverable work products: extension specifications, standards, requirements, best practices, etc. TGs under the unpriv and priv SC can have ISA extension work products. TGs under HCs should not have ISA extension work products.</p><a href=#special-interest-groups-sig><h4 id=special-interest-groups-sig><span class=hanchor arialabel=Anchor># </span><strong>Special Interest Groups (SIG)</strong></h4></a><p>Topic discussion. No work product. Can be created by the TSC, ICs or HCs with TSC approval not required.</p><a href=#chair--vice-chair><h4 id=chair--vice-chair><span class=hanchor arialabel=Anchor># </span><strong>Chair & Vice-Chair</strong></h4></a><p>Leadership positions for a committee, task group, or SIG. These positions are generally elected on an annual basis. Chairs are always from member organisations, while vice-chairs may be either Individual members or representing organisations. Chairs and vice-chairs meet weekly to collaborate and discuss organisational details.</p><a href=#technical-leadership-and-governance><h3 id=technical-leadership-and-governance><span class=hanchor arialabel=Anchor># </span>Technical Leadership and Governance</h3></a><p>Direct work on the specifications is driven by individual task groups working on specific specifications, software initiatives, testing or compliance frameworks, and many other ongoing projects. This work is organised and directed by technical leadership, and enabled and tracked by RISC-V’s neutral technical staff.</p><a href=#technical-steering-committee><h3 id=technical-steering-committee><span class=hanchor arialabel=Anchor># </span>Technical Steering Committee</h3></a><p>The Technical Steering Committee (TSC) provides leadership to our technical initiatives. They are assisted by the Standing Committees, Technical Task Groups, and Special Interest Groups, all of which report to the TSC.</p><p>The TSC delegates responsibilities to organisational components below it in the hierarchy of groups. In addition, it discusses and decides on strategy, escalations, group and chair and preliminary charter approvals, and extension ratification.</p><center><img src=https://courses.edx.org/notes/images/courseware/v1/018aa36ba6fcc105a26bf62c7b8307a0/asset-v1:LinuxFoundationX+LFD110x+1T2021+type@asset+block/technical_organization__1_.png></center>
<center><img src=https://courses.edx.org/notes/images/courseware/v1/ca6261ee043dbf7127a39665a81feed4/asset-v1:LinuxFoundationX+LFD110x+1T2021+type@asset+block/technical_organization__2_.png></center>
<center><img src=https://courses.edx.org/notes/images/courseware/v1/a72d7d1c9a596f5e327dab9c3c640b54/asset-v1:LinuxFoundationX+LFD110x+1T2021+type@asset+block/technical_organization__3_.png></center>
<a href=#isa-and-horizontal-committees-and-subcommittees><h3 id=isa-and-horizontal-committees-and-subcommittees><span class=hanchor arialabel=Anchor># </span>ISA and Horizontal Committees and Subcommittees</h3></a><p>Committees are responsible for directing work within the scope of their charter. ISA committees - “priv” and “unpriv”, referring to the Privileged and Unprivileged RISC-V specification volumes - direct the creation of specific extensions. <strong>Horizontal committees</strong> - including Software, Security, ISA Infrastructure, SOC Infrastructure, Implementation, and others - are responsible for directing specification work in their areas other than ISA extensions. <em>All ISA extensions must be signed off by each of the Horizontal committees prior to ratification</em>.</p><p>Horizontal committees sometimes also have subcommittees, particularly for those committees with a very large scope (such as Software). Subcommittees have largely the same responsibilities, although procedural decisions, including decisions on chairs, are made by the primary committee.</p><a href=#task-groups><h3 id=task-groups><span class=hanchor arialabel=Anchor># </span>Task Groups</h3></a><p>This is where the actual work is done on specifications, software, test frameworks, and other concrete deliverables. Task groups are usually started for a specific purpose, which is then written into their charter and approved by the committee responsible for them. Some task groups finish their work relatively quickly (within 3-6 months) while others work for much longer to make sure the final product is worthy of inclusion.</p><p>The chair for each group is responsible for directing the activities, overseeing the creation of the deliverable work product (spec, software, etc.), reporting back to the Committee and the technical organisation on status, and attending a weekly chairs meeting. Vice-chairs share the responsibilities and the effort, but chairs hold the final responsibility for the group. Chairs and vice-chairs are elected by the community and serve 1-year terms between election cycles, although there are no term limits and existing chairs may reapply.</p><a href=#technical-staff><h3 id=technical-staff><span class=hanchor arialabel=Anchor># </span>Technical Staff</h3></a><a href=#chief-technical-officer><h4 id=chief-technical-officer><span class=hanchor arialabel=Anchor># </span>Chief Technical Officer</h4></a><p>The CTO role is vital, as it provides a neutral leadership function that can’t be filled by a member. The CTO takes all members’ needs into account to both instigate and drive organisation and initiatives within the technical hierarchy, and to facilitate negotiation at all levels within working groups, committees, and governance groups. The CTO also creates and seeks approval for organisational policies, and reports technical progress up to the Board of Directors and functions as the neutral voice of the technical community in workshops and public events.</p><a href=#technical-program-managers><h4 id=technical-program-managers><span class=hanchor arialabel=Anchor># </span>Technical Program Managers</h4></a><p>This is a catch-all term for experienced individuals who perform all of the operational activities within the project, including everything from running meetings to setting up calendar entries and conference calls to organising technical information and even writing detailed technical policies.</p><a href=#other-technical-staff><h4 id=other-technical-staff><span class=hanchor arialabel=Anchor># </span>Other Technical Staff</h4></a><p>While the above roles are the only permanent staff in the technical organisation, RISC-V occasionally hires contractors for specific tasks, including test development and documentation.</p><a href=#additional-roles><h3 id=additional-roles><span class=hanchor arialabel=Anchor># </span>Additional Roles</h3></a><a href=#board-of-directors><h4 id=board-of-directors><span class=hanchor arialabel=Anchor># </span>Board of Directors</h4></a><p>The Board is the primary decision-making body for RISC-V. As such, it has representation from all members. Premier members each have a seat at the table, while Strategic, Community Organisation, and even Community Individual level members elect representatives each year.</p><a href=#marketing--visibility><h4 id=marketing--visibility><span class=hanchor arialabel=Anchor># </span>Marketing & Visibility</h4></a><p>RISC-V has a Director of Marketing who is responsible for driving the visibility of RISC-V worldwide. Working with the Marketing Committee, a member group that provides feedback and resources, the Director of Marketing manages all visibility activities, including the main Marketing Committee, Events, Content (including written, video, and in-person content), social media and PR (supported by an outside firm), and developer advocacy activities including online learning, RISC-V Ambassadors, Regional and Industry Alliances, and the quickly-growing RISC-V user community.</p><a href=#operations--program-management><h4 id=operations--program-management><span class=hanchor arialabel=Anchor># </span>Operations & Program Management</h4></a><p>Operations include the day-to-day management of member activities - joining RISC-V, onboarding, paying dues, becoming part of the Member Portal, and other member activities - as well as support for all other business functions within RISC-V International.</p><a href=#risc-v-wiki><h3 id=risc-v-wiki><span class=hanchor arialabel=Anchor># </span>RISC-V Wiki</h3></a><p>The wiki can be found
<a href=https://wiki.riscv.org/ rel=noopener>here</a>.</p><a href=#public-discussion-groups><h3 id=public-discussion-groups><span class=hanchor arialabel=Anchor># </span>Public Discussion Groups</h3></a><p>Can join discussions and others using links from the
<a href=https://riscv.org/technical/technical-forums/ rel=noopener>technical page</a> on the website.</p><a href=#the-risc-v-exchange><h3 id=the-risc-v-exchange><span class=hanchor arialabel=Anchor># </span>The RISC-V Exchange</h3></a><p>The Exchange contains:</p><ul><li><em>Available Boards</em> - RISC-V based single board computers (SBCs) both open source hardware and proprietary designs. These range from simple microcontroller boards to complex System on Chip (SoC) designs.</li><li><em>Available Cores & SoCs</em> - These hardware designs might be open source or proprietary, and may be available for free or for purchase.</li><li><em>Available Software</em> - Software is available in binary form and in source code form. Licenses stretch across the spectrum from permissive open source to restrictive proprietary licenses.</li><li><em>Available Services</em> - Many organisations provide services relevant to RISC-V product development, including design, verification, software tooling, and more.</li><li><em>Available Learning</em> - Books, online courses, curricula and academic materials, and anything else related to learning about RISC-V.</li></ul><a href=#chapter-4---developing-risc-v><h2 id=chapter-4---developing-risc-v><span class=hanchor arialabel=Anchor># </span>Chapter 4 - Developing RISC-V</h2></a><a href=#overview-3><h3 id=overview-3><span class=hanchor arialabel=Anchor># </span>Overview</h3></a><ul><li>Describe the process used to develop the RISC-V ISA and extensions.</li><li>Differentiate between the RISC-V Base ISAs, Extensions, and Standards.</li><li>Understand the basics of the Unprivileged and Privileged specifications.</li></ul><a href=#how-the-risc-v-isa-is-different><h3 id=how-the-risc-v-isa-is-different><span class=hanchor arialabel=Anchor># </span>How the RISC-V ISA is Different</h3></a><p>The most notable difference between RISC-V and other
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISAs</a> is that RISC-V is developed by a member organisation that is completely free to join and licenses its ISA with permissive open source licenses. This means that anyone can contribute to the specifications, and no one company or group of companies can drive the direction of the standards.</p><p>RISC-V International is governed by its Board of Directors. The Board is composed of members elected to represent all classes of membership to ensure we offer a strategic voice at all levels. In addition, the Technical Steering Committee (TSC) provides leadership to our technical initiatives in setting long term strategy, forming tactical committees and work groups, and approving technical deliverables for ratification or release.</p><a href=#collaborative-development-model><h3 id=collaborative-development-model><span class=hanchor arialabel=Anchor># </span>Collaborative Development Model</h3></a><p>A RISC-V Specification starts its life as a <strong>Task Group</strong> approved by the Technical Steering Committee (TSC). Once a Task Group has an approved charter, they begin work publicly on GitHub by writing their documents in <strong>AsciiDoc format</strong>. These repositories on GitHub can only receive pull requests from RISC-V International members, however the work is done publicly and transparently.</p><p>For groups who choose to take minutes, those minutes from the Task Group meetings are published publicly as well. The public is free to submit issues to the GitHub repository in order to give early feedback on any specification. Non-ISA specifications and standards (e.g. processor trace, architectural tests, software overlay) are developed in a similar fashion.</p><p>RISC-V Specifications live on GitHub and are housed alongside dozens of software projects. See 
<a href=https://riscv.org/technical/specifications/ rel=noopener>a list of ratified specifications</a> and the links to their GitHub repositories.</p><a href=#creating-and-curating-open-specifications><h3 id=creating-and-curating-open-specifications><span class=hanchor arialabel=Anchor># </span>Creating and Curating Open Specifications</h3></a><p>The process of writing the specifications is usually led by a Hardware Architect at one of the RISC-V International member organisations. They may not write the actual text, but they act as the chair to the Task Group overseeing the specification’s development. It can take anywhere from several months to more than a year for the group to complete a specification. We will talk about the lifecycle of an extension later in this chapter.</p><p>What makes this development process open hinges on three key facts:</p><ol><li>The Task Group mailing list is publicly visible.</li><li>The specification document is publicly visible and comments can be left.</li><li>There is a public mailing list where anyone can send email. (
<a rel=noopener class="internal-link broken" data-src=mailto:isa-dev@groups.riscv.org>isa-dev@groups.riscv.org</a>)</li></ol><p>Using this methodology, even non-members can participate in the development of any specification or standard by asking questions, making suggestions, or simply following along. Furthermore, during the ratification process, there is a 45 day window where all specification work must be frozen and the specification published publicly for review. Anyone is welcome to comment at this time and all issues will be brought to resolution before the vote for ratification happens.</p><p>While becoming a member of RISC-V International is the easiest way to contribute to open specifications, it is not the only way. Anyway can contribute by interacting with the Task Groups in public forums like the 
<a href=https://riscv.org/mailing-lists/ rel=noopener>mailing list</a> and GitHub.</p><a href=#risc-v-extensions-lifecycle><h3 id=risc-v-extensions-lifecycle><span class=hanchor arialabel=Anchor># </span>RISC-V Extensions Lifecycle</h3></a><p>Each RISC-V extension goes through several stages on its way to ratification. In this section we will briefly review each stage known as a “milestone”.</p><ol><li><em>Inception</em> - RISC-V technical leaders approve pursuing the extension.</li><li><em>Kickoff</em> - Leadership approves an “acting chair” to drive the process in a task group. The chair creates a name for a task group, preliminary charter, and deliverables.</li><li><em>Plan</em> - The group develops a final charter and sets some timeline estimates.</li><li><em>Experimental Versions</em> - The groups releases several versions considered unstable.</li><li><em>Freeze</em> - The group produces a complete final draft of the specification with no major unknowns and no expected changes (only to fix issues but no new features).</li><li><em>Ratification Ready</em> - The draft specification is sent out for public review, any public comments or questions are addressed, and the Technical Steering Committee is made aware that a vote is required.
7.<em>Complete</em> - The extension is ratified and supported as part of the RISC-V ISA.</li></ol><center><img src=https://courses.edx.org/notes/images/courseware/v1/e9ec87214f09abf0169226df15e0388d/asset-v1:LinuxFoundationX+LFD110x+1T2021+type@asset+block/Extension_lifecycle_and_milestone_definitions.jpg></center><p>Once an extension has been ratified it is added to either the <strong>Unprivileged</strong> or <strong>Privileged</strong> Specification. Occasionally a specification is created as part of a separate document, with the debug specification being the most common example. However, this is a rare case and usually indicates that the extension is not part of the
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a>, but rather a “standard” or “non-ISA specification”. We will now review the Unprivileged and Privileged Specification in greater detail.</p><a href=#organising-the-specifications><h3 id=organising-the-specifications><span class=hanchor arialabel=Anchor># </span>Organising the Specifications</h3></a><p>The RISC-V
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a> is broken up into two parts:</p><ul><li>Volume 1, Unprivileged Specification</li><li>Volume 2, Privileged Specification</li></ul><p>To understand why the specification is broken up into two different parts, we must first understand a bit about computer architecture and security. Historically, processors used hierarchical protection domains, often called protection rings, to protect data and code from malicious actors.</p><center><img src=https://courses.edx.org/notes/images/courseware/v1/a747ba9c1697a0bea78672847048eed5/asset-v1:LinuxFoundationX+LFD110x+1T2021+type@asset+block/Privilege_rings_for_the_x86__along_with_their_common_uses.png></center>
The most privileged code runs in “Ring 0” and has access to the entire system. The processor will decide which privileges to grant executing code based on the privilege level. As an example, accessing memory by physical address may be restricted to “Ring 0” such that other rings must reference the virtual address space. Typically the processor can run in only one of the privilege modes at a time and there are special instructions to move between modes. All of these details can change from system to system, however they must follow the rules set out in the specification documents of a given architecture.<p>RISC-V currently has three privilege levels: <strong>User Mode</strong> (U-mode), <strong>Supervisor Mode</strong> (S-mode), and <strong>Machine Mode</strong> (M-mode). One can think of these as “Ring 2”, “Ring 1”, and “Ring 0” respectively. Other modes like a hypervisor mode (H-mode) will likely be added in the near future. Much like in the figure above, U-mode is for user processes, S-mode is for kernel and/or device drivers, and M-mode is used for bootloader and/or firmware. Each privilege level has access to specific <em>Control and Status Registers</em> (CSRs), and higher privilege levels can access the CSRs of those less privileged levels.</p><a href=#inside-the-unprivileged-specification><h3 id=inside-the-unprivileged-specification><span class=hanchor arialabel=Anchor># </span>Inside the Unprivileged Specification</h3></a><p>Simply put, the unprivileged specification details items that are not related to machine mode (M-mode) or to Supervisor Mode (S-mode). The unprivileged specification includes the base ISA as well as extensions to that base like integer (I), float (F), double (D), compressed instructions (C), and many more.</p><p>The base instruction sets describe the instruction format, basic integer instructions, load and store instructions, and other fundamental details of the ISA. We break these up into several bases:</p><ol><li>RV32I - Integer 32 bit</li><li>RV32E - Reduced RV32I for embedded purposes</li><li>RV64I - Integer 64 bit</li><li>RV128I - Integer 128 bit</li></ol><p>All these “Base ISA’s” either reduce or extend off the RV32I base instruction set. As an example, RV64I widens the integer registers and the supported user address space to 64 bits. This means that the LOAD and STORE instructions work a bit differently than in RV32I and the unprivileged specification contains the chapter explaining these differences.</p><a href=#base-isa-extensions><h3 id=base-isa-extensions><span class=hanchor arialabel=Anchor># </span>Base ISA Extensions</h3></a><p>The unprivileged specification also contains the descriptions of the extensions to these base ISAs. Again, any extension that does note require M-mode to operate can be described in the unprivileged specification.</p><p>Each extension to the base ISA is developed and maintained by a Task Group:</p><ul><li><em>Crypto Task Group</em> working on cryptographic extensions which can move many complex cryptographic algorithms into hardware, improving reliability and speed.</li><li><em>B Extension Task Group</em> working on bit manipulation extensions which can speed up many common mathematical tasks.</li><li><em>Vector (V) Extension Task Group</em> working on vector instructions which are at the heart of many graphical processing computations.</li></ul><p>Once ratified, these extensions are added to the unprivileged specification. The following are some of the ratified extensions that you might see in a RISC-V processor:</p><a href=#m-standard-extension><h4 id=m-standard-extension><span class=hanchor arialabel=Anchor># </span>“M” Standard Extension</h4></a><p>Chapter 7 of the 
<a href=https://riscv.org/technical/specifications/ rel=noopener>Unprivileged Specification</a> describes how integer multiplication and division should be accomplished. It describes how each of the multiplication instructions (MUL, MULH, MULHU, MULHU, MULW) will behave, which registers are used for the multiplier and multiplicand, and where the result will be stored. It does the same for division since functionally one can view division as simply the inverse of multiplication. It may seem odd to you that this extension is not required. However, for many embedded processors, multiplication can be done in software if it is not required very often or even at all. Removing this logic from a processor will save money on development, keeping the end product cost lower.</p><a href=#f-standard-extension><h4 id=f-standard-extension><span class=hanchor arialabel=Anchor># </span><strong>“F” Standard Extension</strong></h4></a><p>Chapter 11 describes how we add single-precision floating-point computational instructions that are compliant with the IEEE 754-2008 arithmetic standard. There are many resources available covering the details of floating-point arithmetic in computing. It is enough to understand that this chapter describes how this process is implemented in RISC-V, and is complimented by Chapter 12 (the D extension) which describes double-precision floating-point computational instructions. Lastly, Chapter 13 covers the Q standard extension for 128-bit quad-precision binary floating-point instructions. All three of these conform to IEEE standards. Again, many embedded applications do not require floating point logic, and hence this extension is not part of the Base ISAs.</p><a href=#c-standard-extension><h4 id=c-standard-extension><span class=hanchor arialabel=Anchor># </span><strong>“C” Standard Extension</strong></h4></a><p>Chapter 16 describes the compressed instruction-set extension which reduces static and dynamic code size by adding short 16-bit instruction encodings for common operations. Typically, 50%–60% of the RISC-V instructions in a program can be replaced with RVC instructions, resulting in a 25%–30% code-size reduction. The C extension is compatible with all other standard instruction extensions. The C extension allows 16-bit instructions to be freely intermixed with 32-bit instructions, with the latter able to start on any 16-bit boundary. As such, with the addition of the C extension to any system, no instructions can raise instruction-address-misaligned exceptions.</p><p>This covers most of the currently ratified extensions in the unprivileged specification. However, it is important to note that many extensions are included in the specification in a “draft” or “frozen” stage. As we discussed in the section on “
<a href=/quartz/notes/general/introduction-to-riscv/ rel=noopener class=internal-link data-src=/quartz/notes/general/introduction-to-riscv/></a>”, these specifications are not yet ratified and any implementation should avoid using them in production.</p><a href=#the-privileged-specification><h3 id=the-privileged-specification><span class=hanchor arialabel=Anchor># </span>The Privileged Specification</h3></a><p>As its name suggests, the privileged specification contains descriptions of the RISC-V
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a> which operate in Machine Mode (M-mode) or Supervisor Mode (S-mode). These modes have elevated privileges and are therefore described in a completely separate document from the base
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a> and standard extensions. This specification also contains additional functionality required for running rich operating systems like Linux.</p><p>The first part of each chapter of the privileged specification details the Control and Status Registers (CSRs) which are only accessible from M-mode and S-mode. We will not cover these details here, but will rather focus on other details specific to these two modes.</p><a href=#machine-level-m-mode-isa><h3 id=machine-level-m-mode-isa><span class=hanchor arialabel=Anchor># </span>Machine-Level (M-Mode) ISA</h3></a><p>M-mode is used for low-level access to a hardware platform and is the first mode entered at reset, when the processor finishes initialising and is ready to execute code.</p><p>M-mode can also be used to implement features that are too difficult or expensive to implement in hardware directly. A good example of this would be a watchdog timer implemented in low level software (firmware) which helps the system recover from faults.</p><a href=#non-maskable-interrupts-nmis><h3 id=non-maskable-interrupts-nmis><span class=hanchor arialabel=Anchor># </span>Non-Maskable Interrupts (NMIs)</h3></a><p>Non-maskable interrupts (NMIs) are only used for hardware error conditions. When fired, they cause an immediate jump to an NMI handler running in M-mode, regardless of how that hardware thread has its interrupt enable bit set. In other words, that interrupt will be serviced without a way to block the service in configuration.</p><p>Each NMI will have a “mcause” register associated with it. This allows implementations to decide how they wish to handle these interrupts and allows them to define many possible causes. NMIs do not reset processor state which enables diagnosis, reporting, and possible containment of the hardware error.</p><a href=#physical-memory-attributes-pma><h3 id=physical-memory-attributes-pma><span class=hanchor arialabel=Anchor># </span>Physical Memory Attributes (PMA)</h3></a><p>The physical memory map for a system includes address ranges like: memory regions, memory-mapped control registers, and empty holes in the address space. Some memory regions might not support reads, writes, or execution; some might not support subword or subblock accesses; some might not support atomic operations; and some might not support cache coherence or might have different memory models. In RISC-V systems, these properties and capabilities of each region of the machine’s physical address space are termed physical memory attributes (PMAs).</p><p>The PMAs of some memory regions are fixed at chip design time—for example, for an on-chip ROM. Others are fixed at board design time, depending, for example, on which other chips are connected to off-chip buses. Some devices might be configurable at run time to support different uses that imply different PMAs—for example, an on-chip scratchpad RAM might be cached privately by one core in one end-application, or accessed as a shared non-cached memory in another end-application. Most systems will require that at least some PMAs are dynamically checked in hardware later in the execution pipeline after the physical address is known, as some operations will not be supported at all physical memory addresses, and some operations require knowing the current setting of a configurable PMA attribute.</p><p>For RISC-V, we separate out specification and checking of PMAs into a separate hardware structure, the “PMA checker”. In many cases, the attributes are known at system design time for each physical address region, and can be hardwired into the PMA checker. Where the attributes are run-time configurable, platform-specific memory-mapped control registers can be provided to specify these attributes at a granularity appropriate to each region on the platform (e.g., for an on-chip static random-access memory (SRAM) that can be flexibly divided between cacheable and uncacheable uses).</p><p>The details of PMAs could easily take up an entire chapter of this course. We will not cover memory-ordering PMAs, idempotency PMAs, coherence PMAs, or cacheability PMAs. The details of PMAs are described in detail in section 3.5 of the
<a href=https://riscv.org/technical/specifications/ rel=noopener>Privileged Specification</a>. Advanced users may want to review this section.</p><a href=#physical-memory-protection-pmp><h3 id=physical-memory-protection-pmp><span class=hanchor arialabel=Anchor># </span>Physical Memory Protection (PMP)</h3></a><p>A common feature of most modern processors is some way of performing secure remote computation or a “trusted execution environment”. Examples of this technology include Intel Software Guard Extensions (SGX), AMD Secure Encrypted Virtualization (SEV), and Arm TrustZone. While the RISC-V ISA does not provide an end-to-end solution for Trusted Execution Environments, the physical memory protection (PMP) capabilities are a solid foundation on which one might construct such a system.</p><p>RISC-V PMP limits the physical addresses accessible by software running on a hart (hardware thread). An optional PMP unit provides per-hart machine-mode control registers to allow physical memory access privileges (read, write, execute) to be specified for each physical memory region. The PMP values are checked in parallel with the PMA checks we covered in the last section. The granularity of PMP access control settings are platform-specific and within a platform may vary by physical memory region, but the standard PMP encoding supports regions as small as four bytes. Certain regions’ privileges can be hardwired—for example, some regions might only ever be visible in machine mode but in no lower-privilege layers.</p><p>PMP entries are described by an 8-bit configuration register and one 32 (or 64) bit address register. Up to 16 PMP entries are supported. If any PMP entries are implemented, then all PMP CSRs must be implemented, but any PMP CSR fields may be hardwired to zero. PMP CSRs are only accessible to M-mode.</p><center><img src=https://courses.edx.org/notes/images/courseware/v1/2bc57c54106ee5b9e0462510442bf21c/asset-v1:LinuxFoundationX+LFD110x+1T2021+type@asset+block/Example_illustrating_how_to_set_up_two_different_contexts__one_untrusted_and_one_with_access_to_Enclave_E1.png></center>
Source: By Lee, D., Kohlbrenner, D., Shinde, S., Song, D., & Asanovic, K. (2019). Keystone: A Framework for Architecting TEEs. _CoRR, vol. abs/1907.10119_ [http://arxiv.org/abs/1907.10119](https://arxiv.org/abs/1907.10119).<p>Here we see an example of how one might set up two different contexts, one untrusted and one with access to “Enclave E1”. In this example an application is run in user context U1. That application only has access to its own memory and the memory inside enclave E1. The memory inside enclave E2 and that located in the “security monitor” (SM) are not available to the user application. In this way, data confidentiality is assured simply by allowing the security monitor (running in M-mode) to change the PMP settings allowing or denying access to memory regions based on the PMP configurations.</p><a href=#supervisor-level-s-mode-isa><h3 id=supervisor-level-s-mode-isa><span class=hanchor arialabel=Anchor># </span>Supervisor-Level (S-Mode) ISA</h3></a><p>This chapter describes the RISC-V supervisor-level architecture, which contains a common core that is used with various supervisor-level address translation and protection schemes. Supervisor mode is deliberately restricted in terms of interactions with underlying physical hardware, such as physical memory and device interrupts, to support clean virtualisation. In this spirit, certain supervisor-level facilities, including requests for timer and interprocessor interrupts, are provided by implementation-specific mechanisms. In some systems, a supervisor execution environment (SEE) provides these facilities in a manner specified by a supervisor binary interface (SBI). Other systems supply these facilities directly, through some other implementation-defined mechanism.</p><p>RISC-V supports Page-Based 32-bit, 39-bit, and 48-bit virtual memory addressing. The supervisor (S-Mode) memory-management fence instruction (SFENCE.VMA) is used to synchronise updates to in-memory memory-management data structures with current execution. Executing this instruction guarantees that any previous stores already visible to the current RISC-V hart (hardware thread) are ordered before all subsequent implicit references from that hart to the memory-management data structures.</p><p>Virtual Memory is a concept which takes several months of graduate level education to grasp and is beyond the scope of this course. It is enough for this course that you understand that RISC-V supports Page-Based virtual memory of several widths, and that there is a special S-Mode instruction used for synchronising updates between hardware threads.</p><a href=#non-isa-specifications><h3 id=non-isa-specifications><span class=hanchor arialabel=Anchor># </span>Non-ISA Specifications</h3></a><p>Task Groups can also work on software or standards that are not part of the
<a href=/quartz/notes/general/isa/ rel=noopener class=internal-link data-src=/quartz/notes/general/isa/>ISA</a>. For example, the following groups work on projects that do not lead to specifications being written, but rather standards that encourage communities to develop their products around a common framework:</p><ul><li><em>Debug Task Group</em> working on external debugging support and standards.</li><li><em>Compliance Task Group</em> working on RISC-V ISA compliance tests and frameworks.</li><li><em>Configuration Structure Task Group</em> working on how to represent the configuration structure of a given hardware implementation both in a human-readable format, as well as a binary format.</li></ul><a href=#chapter-5---risc-v-in-practice><h2 id=chapter-5---risc-v-in-practice><span class=hanchor arialabel=Anchor># </span>Chapter 5 - RISC-V In Practice</h2></a><a href=#overview-4><h3 id=overview-4><span class=hanchor arialabel=Anchor># </span>Overview</h3></a><ul><li>Understand how to emulate a simple Linux system using QEMU.</li><li>Write a simple “Hello World” program in RISC-V 64 bit assembly language.</li><li>Compile and run a RISC-V application in emulation.</li></ul><a href=#required-documentation><h3 id=required-documentation><span class=hanchor arialabel=Anchor># </span>Required Documentation</h3></a><p>First off, Chapter 2 of the RISC-V
<a href=/quartz/notes/general/introduction-to-riscv/ rel=noopener class=internal-link data-src=/quartz/notes/general/introduction-to-riscv/></a> goes into detail about the RV32I Base Integer Instruction Set, including a programming model and an explanation of instruction formats. While this information is not required for this course it is certainly helpful in understanding how the RISC-V architecture executes instructions.</p><p>For programming assembly instructions, we can use both the ABI reference documentation and the ASM manual to answer any questions we may have along the way. You can find those documents here:</p><ul><li><a href=https://riscv.org/technical/specifications/ rel=noopener>RISC-V Specifications</a></li><li><a href=https://github.com/riscv/riscv-elf-psabi-doc/blob/master/riscv-elf.md rel=noopener>ABI Documentation</a></li><li><a href=https://github.com/riscv/riscv-asm-manual/blob/master/riscv-asm.md rel=noopener>ASM Manual</a></li></ul><p>Again, none of this information is required knowledge for this chapter, but you can reference it if you have any questions not answered here.</p><a href=#assembly-language-overview><h3 id=assembly-language-overview><span class=hanchor arialabel=Anchor># </span>Assembly Language Overview</h3></a><p>This chapter will be a very high level overview of RISC-V assembly instructions and will only cover a few of those instructions in practice. The hope is that this tutorial will give you the tools you need to continue your journey programming assembly language. If your goal is simply to understand the basics and develop applications in a higher level language, this course will likely cover most of the information you need.</p><p>RISC-V is a “reduced instruction set” architecture, and as such, there are not many instructions to learn. In this tutorial, we only use 3 instructions: <code>LA</code> (load absolute address), <code>ADDI</code> (add immediate), and <code>ECALL</code>. The <code>ECALL</code> instruction is used to make a service request to the execution environment. We will only use two calls in our Hello World app, one to “write” and one to “exit”.</p><p>For a full list of instructions you can see the
<a href=https://riscv.org/wp-content/uploads/2019/12/riscv-spec-20191213.pdf#129 rel=noopener></a>. For more information, visit
<a href=https://riscv.org/community/learn/ rel=noopener>RISC-V website</a>.</p><a href=#compiling-required-binaries><h3 id=compiling-required-binaries><span class=hanchor arialabel=Anchor># </span>Compiling Required Binaries</h3></a><p>Instructions for compiling required binaries can be found in the <em><a href=https://risc-v-getting-started-guide.readthedocs.io/en/latest/linux-qemu.html rel=noopener>&ldquo;RISC-V - Getting Started Guide&rdquo;</a></em>.</p><a href=#creating-a-custom-risc-v-system><h3 id=creating-a-custom-risc-v-system><span class=hanchor arialabel=Anchor># </span>Creating a Custom RISC-V System</h3></a><p>If you are already comfortable with compiling the Linux kernel, QEMU, and software suites like BusyBox, you may want to take things a step further. There is a build system for creating Linux based root file systems and emulating them called the Yocto Project. RISC-V has a “layer” which can be used to create a completely custom Linux distribution. For more details see 
<a href=https://github.com/riscv/meta-riscv rel=noopener>meta-riscv</a> on GitHub.</p><a href=#environment-overview><h3 id=environment-overview><span class=hanchor arialabel=Anchor># </span>Environment Overview</h3></a><p>The hello world application we will be using:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># Simple RISC-V Hello World
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>.global _start
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>_start: addi x0, x0, 1
</span></span><span class=line><span class=cl>        la   a1, helloworld
</span></span><span class=line><span class=cl>        addi a2, x0, 13
</span></span><span class=line><span class=cl>        addi a7, x0, 64
</span></span><span class=line><span class=cl>        ecall
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        addi a0, x0, 0
</span></span><span class=line><span class=cl>        addi a7, x0, 93
</span></span><span class=line><span class=cl>        ecall
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>.data
</span></span><span class=line><span class=cl>helloworld:    .ascii &#34;Hello World!\n&#34;
</span></span></code></pre></td></tr></table></div></div><p>There are also two ways of compiling this code, either using GCC or calling “as” and “ld” directly:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># GCC  </span>
</span></span><span class=line><span class=cl>riscv64-linux-gnu-gcc -o rv-hello rv-hello.s -nostdlib -static
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># AS &amp; LD  </span>
</span></span><span class=line><span class=cl>riscv64-linux-gnu-as -march<span class=o>=</span>rv64imac -o rv-hello.o rv-hello.s  
</span></span><span class=line><span class=cl>riscv64-linux-gnu-ld -o rv-hello rv-hello.o
</span></span></code></pre></td></tr></table></div></div><hr><a href=#more-information><h2 id=more-information><span class=hanchor arialabel=Anchor># </span>More information</h2></a><ul><li><a href=https://riscv.org/ rel=noopener>riscv.org</a></li><li><a href=https://www2.eecs.berkeley.edu/Pubs/TechRpts/2014/EECS-2014-146.pdf rel=noopener>Benefits of open instructions.</a></li><li><a href=https://riscv.org/technical/specifications/risc-v-genealogy/ rel=noopener>RISC-V Genealogy</a></li></ul></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/quartz/notes/general/introduction-to-riscv/ data-ctx data-src=/notes/general/introduction-to-riscv class=internal-link>Introduction to RISC-V</a></li><li><a href=/quartz/notes/general/riscv/ data-ctx="Introduction to RISC-V" data-src=/notes/general/riscv class=internal-link>RISC-V</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://pietraferreira.github.io/quartz/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by Morioh using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2023</p><ul><li><a href=https://pietraferreira.github.io/quartz/>Home</a></li><li><a href=https://github.com/pietraferreira>Github</a></li></ul></footer></div></div></body></html>